- defaults:
    link:
      relink: true

- clean: ['~']

- create:
  - ~/.config/bat/themes
  - ~/.fonts
  - ~/.ssh

- shell:
  - git config --global include.path ${PWD}/gitconfig
  - cp -R fonts/* ~/.fonts/
  - if [ `uname` = Linux ]; then fc-cache; fi
  - curl -o ~/.config/bat/themes/kanagawa.tmTheme -sSL https://raw.githubusercontent.com/rebelot/kanagawa.nvim/master/extras/kanagawa.tmTheme
  - |
    include='Include ~/.dotfiles/config/ssh/config'
    config_file="$HOME/.ssh/config"
    if [ ! -f "$config_file" ]; then
      touch "$config_file"
    fi

    if ! grep -qF "$include" "$config_file"; then
      echo "$include" >> "$config_file"
    fi
  - |
    if [ `uname` = Darwin ]; then
      echo 'include macos.conf' > config/kitty/os.conf
    elif [ `uname` = Linux ]; then
      echo 'include linux.conf' > config/kitty/os.conf
    fi

- link:
    ~/.tmux.conf: tmux.conf
    ~/.zshrc: zshrc
    ~/.config/kitty: config/kitty
    ~/.config/zellij: config/zellij
    ~/.config/nvim: config/nvim
    ~/.config/neovide: config/neovide
    ~/.local/bin/osc52-yank: scripts/osc52-yank
    ~/.editorconfig: editorconfig

    # for linux
    ~/.config/bspwm:
      path: config/bspwm
      if: '[ `uname` = Linux ]'
    ~/.config/dunst:
      path: config/dunst
      if: '[ `uname` = Linux ]'
    ~/.config/networkmanager-dmenu:
      path: config/networkmanager-dmenu
      if: '[ `uname` = Linux ]'
    ~/.config/sxhkd:
      path: config/sxhkd
      if: '[ `uname` = Linux ]'
    ~/.Xresources:
      path: config/Xresources
      if: '[ `uname` = Linux ]'
    ~/.Xresources.d:
      path: config/Xresources.d
      if: '[ `uname` = Linux ]'
